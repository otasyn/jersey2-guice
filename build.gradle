plugins {
  id 'java'
  id 'war'
  id 'org.gretty' version '3.0.3'
}

repositories {
  mavenLocal()
  jcenter()
}

ext {
  jerseyVersion = '2.31'
  guiceBridgeVersion = '2.6.1'
  guiceVersion = '4.2.3'
  jaxbVersion = '2.3.3'
  servletApiVersion = '4.0.1'
  urlRewriteVersion = '4.0.3'
  webjarVersion = '0.1.0-SNAPSHOT'
}

dependencies {
  implementation "org.glassfish.jersey.containers:jersey-container-servlet:${jerseyVersion}"
  implementation "org.glassfish.jersey.ext:jersey-mvc-jsp:${jerseyVersion}"
  implementation "org.glassfish.jersey.inject:jersey-hk2:${jerseyVersion}"
  implementation "org.glassfish.hk2:guice-bridge:${guiceBridgeVersion}"
  implementation "com.google.inject:guice:${guiceVersion}"
  implementation "jakarta.xml.bind:jakarta.xml.bind-api:${jaxbVersion}"
  implementation "org.glassfish.jaxb:jaxb-runtime:${jaxbVersion}"
  implementation "org.tuckey:urlrewritefilter:${urlRewriteVersion}"

  implementation "org.otasyn.template:angular-webjar:${webjarVersion}"

  providedCompile "javax.servlet:javax.servlet-api:${servletApiVersion}"
}

group = 'org.otasyn.template'
version = '0.1.0-SNAPSHOT'
sourceCompatibility = JavaVersion.VERSION_11

/**
 * Gretty
 *
 * Tasks
 *   :appRun   - Spin up a servlet container
 *   :appStart - Spin up a servlet container and can be stopped with :appStop
 *   :appStop  - Stop a servlet container spun up with :appStart
 *
 * Configuration
 *   https://gretty-gradle-plugin.github.io/gretty-doc/Gretty-configuration.html
 */
gretty {
  contextPath 'jersey2-guice'

  // servletContainer 'tomcat9'
  servletContainer 'jetty9.4'
}
